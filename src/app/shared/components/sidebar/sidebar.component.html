<aside class="sidebar">
  <div class="logo-wrapper" [class.has-error]="logoError()">
    <img
      *ngIf="!logoError()"
      src="/images/logo.svg"
      alt="Logo"
      class="logo"
      (error)="onLogoError($event)"
    />

    <div *ngIf="logoError()" class="logo-fallback">
      <mat-icon>business</mat-icon>
    </div>
  </div>

  <nav class="sidebar-nav">
    <mat-nav-list>
      <div *ngFor="let item of menuItems()">
        <a
          *ngIf="!item.children"
          mat-list-item
          [routerLink]="item.path"
          routerLinkActive="active-link"
          [class.active-item]="isItemActive(item)"
          class="nav-item"
          (click)="setActiveItem(item)"
        >
          <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
          <span matListItemTitle class="nav-label">{{ item.label }}</span>
        </a>

        <mat-expansion-panel
          *ngIf="item.children"
          [expanded]="item.isExpanded"
          (click)="$event.stopPropagation()"
          class="nav-parent"
        >
          <mat-expansion-panel-header class="nav-header">
            <mat-panel-title>
              <mat-icon>{{ item.icon }}</mat-icon>
              <span class="nav-label">{{ item.label }}</span>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-nav-list>
            <a
              *ngFor="let child of item.children"
              mat-list-item
              [routerLink]="child.path"
              routerLinkActive="active-link"
              class="submenu-item"
            >
              <mat-icon matListItemIcon>{{ child.icon }}</mat-icon>
              <span matListItemTitle>{{ child.label }}</span>
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
      </div>
      <a mat-list-item class="nav-item" (click)="logOut()">
        <mat-icon matListItemIcon>logout</mat-icon>
        <span matListItemTitle class="nav-label">Cerrar Session</span>
      </a>
    </mat-nav-list>
  </nav>
</aside>
